import{aq as w,q as C,c as T,b as c,u as S,R as k,j as e,G as s,M as v,B as E,A as _,T as p,P as A,ad as m,aB as z}from"./index-3yxb8THO.js";import{a as x}from"./axios-C6NQisi-.js";import{E as B}from"./EarningCard-Cw3mUeRn.js";const R=({isLoading:u})=>{const y=w(),d=C(),l=T(t=>t.authUser).auth.token,[n,f]=c.useState([]),[$,g]=c.useState(null),o=S();k.useState(null);const j=t=>{const h={client_id:t};(async()=>{try{const a=await x.post(`${m.apiBaseUrl}/api/company/select`,h,{headers:{"Content-Type":"application/json",Authorization:`pac ${l}`}});if(!a.statusText)throw new Error("Network response was not ok");const i=await a.data,b=await i.companyToken;console.log("Server response:",i),i.status==="success"?(y(z(b)),d("/dashboard")):d("/companies")}catch(a){alert("Select company failed"),console.error("There was an error!",a)}})()};return c.useEffect(()=>{(async h=>{try{const a=await(await x.get(`${m.apiBaseUrl}/api/company`,{headers:{"Content-Type":"application/json",Authorization:`pac ${l}`}})).data;f(await a.data)}catch(r){console.error("Error fetching companies",r),g(r)}})()},[]),e.jsx(e.Fragment,{children:e.jsx(s,{container:!0,spacing:2,sx:{mr:0},children:n==null?void 0:n.map(t=>e.jsx(s,{item:!0,xl:4,lg:4,md:6,xs:12,children:u?e.jsx(B,{}):e.jsx(v,{onClick:()=>j(t.client_id),border:!1,content:!1,sx:{p:2.25,cursor:"pointer",bgcolor:"secondary.dark",color:"#fff",overflow:"hidden",position:"relative",transition:"transform 0.3s, box- shadow 0.3s","&:hover":{transform:"translateY(-10px)",boxShadow:"0px 0px 20px rgba(94, 53, 177, 1)"},"&:after":{content:'""',position:"absolute",width:210,height:210,background:o.palette.secondary[800],borderRadius:"50%",top:{xs:-105,sm:-85},right:{xs:-140,sm:-95}},"&:before":{content:'""',position:"absolute",width:210,height:210,background:o.palette.secondary[800],borderRadius:"50%",top:{xs:-155,sm:-125},right:{xs:-70,sm:-15},opacity:.5}},children:e.jsx(E,{children:e.jsxs(s,{container:!0,direction:"column",children:[e.jsx(s,{item:!0,children:e.jsxs(s,{container:!0,justifyContent:"space-between",children:[e.jsx(s,{item:!0,children:e.jsx(_,{variant:"rounded",sx:{...o.typography.commonAvatar,...o.typography.largeAvatar,bgcolor:"secondary.800",mt:1},children:e.jsx("img",{src:t.image,alt:"C"})})}),e.jsx(s,{item:!0})]})}),e.jsx(s,{item:!0,children:e.jsx(s,{container:!0,alignItems:"center",children:e.jsx(s,{item:!0,children:e.jsx(p,{sx:{fontSize:"2.125rem",fontWeight:500,mr:1,mt:1.75,mb:.75},children:t.company_name})})})}),e.jsxs(s,{item:!0,sx:{mb:1.25},children:[e.jsxs(p,{sx:{fontSize:"1rem",fontWeight:500,color:"secondary.200"},children:[t.company_address1,", ",t.company_address2,", ",t.company_pin]}),e.jsxs(p,{sx:{fontSize:"1rem",fontWeight:500,color:"secondary.200"},children:["Mob ",t.company_phone]})]})]})})})},t.client_id))})})};R.propTypes={isLoading:A.bool};export{R as default};
