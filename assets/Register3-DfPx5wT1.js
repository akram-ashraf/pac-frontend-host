import{ay as x,u as H,aq as U,q as _,ar as D,c as V,b as c,j as e,G as s,B as h,T as w,ad as J,az as K,F as m,x as p,at as g,au as d,I as M,K as q,av as Q,h as Z,aw as B,ax as X,ac as Y,D as ee}from"./index-3yxb8THO.js";import{F as te,c as re,a as j,h as se,g as ne,d as E,b as A,A as ie,e as ae,f as oe}from"./AuthFooter-Qj-qoQfa.js";import"./axios-C6NQisi-.js";const le=r=>new RegExp(/[0-9]/).test(r),de=r=>new RegExp(/[a-z]/).test(r)&&new RegExp(/[A-Z]/).test(r),ce=r=>new RegExp(/[!#@$%^&*)(+=._-]/).test(r),me=r=>r<2?{label:"Poor",color:x.errorMain}:r<3?{label:"Weak",color:x.warningDark}:r<4?{label:"Normal",color:x.orangeMain}:r<5?{label:"Good",color:x.successMain}:r<6?{label:"Strong",color:x.successDark}:{label:"Poor",color:x.errorMain},ue=r=>{typeof r!="string"&&(r=""+r);let n=0;return r.length>5&&(n+=1),r.length>7&&(n+=1),le(r)&&(n+=1),ce(r)&&(n+=1),de(r)&&(n+=1),n},xe=({...r})=>{const n=H(),S=U(),C=_(),W=D(n.breakpoints.down("md"));V(t=>t.customization);const[b,R]=c.useState(!1),[y,$]=c.useState(!1);c.useState(!0);const[I,z]=c.useState(null),[T,L]=c.useState(0),[u,N]=c.useState(),O=()=>{R(!b)},G=()=>{$(!y)},v=t=>{t.preventDefault()},k=t=>{const a=ue(t);L(a),N(me(a))};return c.useEffect(t=>{k(t)},[]),e.jsxs(e.Fragment,{children:[e.jsx(s,{container:!0,direction:"column",justifyContent:"center",spacing:2,children:e.jsx(s,{item:!0,xs:12,container:!0,alignItems:"center",justifyContent:"center",children:e.jsx(h,{sx:{mb:2},children:e.jsx(w,{variant:"subtitle1",children:"Sign up with Email address"})})})}),e.jsx(te,{initialValues:{fname:"",lname:"",mobile:"",email:"",password:"",confirmPassword:"",submit:null},validationSchema:re().shape({fname:j().max(255).required("First name is required"),lname:j().max(255).required("Last name is required"),mobile:j().matches(/^\d{10}$/,"Mobile number must be exactly 10 digits").required("Mobile number is required"),email:j().email("Must be a valid email").max(255).required("Email is required"),password:j().max(255).required("Password is required"),confirmPassword:j().oneOf([se("password")],"Passwords must match").required("Confirm password is required")}),onSubmit:async(t,{setSubmitting:a})=>{try{const P={fullName:`${t.fname} ${t.lname}`.trim(),phone:t.mobile,email:t.email,password:t.password},f=await fetch(`${J.apiBaseUrl}/public/user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(f.status===500&&console.log("Internal Server Error"),!f.ok)throw z("Registration failed..!"),new Error("Registration failed");const i=await f.json(),l=await i.token;i.status==="success"?(S(K(i)),ne(l,S),C("/companies")):C("/register")}catch(o){console.log(o)}finally{a(!1)}},children:({errors:t,handleBlur:a,handleChange:o,handleSubmit:P,isSubmitting:f,touched:i,values:l})=>e.jsxs("form",{noValidate:!0,onSubmit:P,...r,children:[e.jsxs(s,{container:!0,spacing:W?0:2,children:[e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsxs(m,{fullWidth:!0,error:!!(i.fname&&t.fname),sx:{...n.typography.customInput},children:[e.jsx(p,{htmlFor:"outlined-adornment-fname-register",children:"First Name"}),e.jsx(g,{id:"outlined-adornment-fname-register",type:"text",value:l.fname,name:"fname",onBlur:a,onChange:o,inputProps:{}}),i.fname&&t.fname&&e.jsx(d,{error:!0,id:"standard-weight-helper-text--register",children:t.fname})]})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsxs(m,{fullWidth:!0,error:!!(i.lname&&t.lname),sx:{...n.typography.customInput},children:[e.jsx(p,{htmlFor:"outlined-adornment-lname-register",children:"Last name"}),e.jsx(g,{id:"outlined-adornment-lname-register",type:"text",value:l.lname,name:"lname",onBlur:a,onChange:o,inputProps:{}}),i.lname&&t.lname&&e.jsx(d,{error:!0,id:"standard-weight-helper-text--register",children:t.lname})]})})]}),e.jsxs(m,{fullWidth:!0,error:!!(i.mobile&&t.mobile),sx:{...n.typography.customInput},children:[e.jsx(p,{htmlFor:"outlined-adornment-mobile-register",children:"Mobile"}),e.jsx(g,{id:"outlined-adornment-mobile-register",type:"tel",value:l.mobile,name:"mobile",onBlur:a,onChange:o,inputProps:{}}),i.mobile&&t.mobile&&e.jsx(d,{error:!0,id:"standard-weight-helper-text--register",children:t.mobile})]}),e.jsxs(m,{fullWidth:!0,error:!!(i.email&&t.email),sx:{...n.typography.customInput},children:[e.jsx(p,{htmlFor:"outlined-adornment-email-register",children:"Email Address / Username"}),e.jsx(g,{id:"outlined-adornment-email-register",type:"email",value:l.email,name:"email",onBlur:a,onChange:o,inputProps:{}}),i.email&&t.email&&e.jsx(d,{error:!0,id:"standard-weight-helper-text--register",children:t.email})]}),e.jsxs(m,{fullWidth:!0,error:!!(i.password&&t.password),sx:{...n.typography.customInput},children:[e.jsx(p,{htmlFor:"outlined-adornment-password-register",children:"Password"}),e.jsx(g,{id:"outlined-adornment-password-register",type:b?"text":"password",value:l.password,name:"password",label:"Password",onBlur:a,onChange:F=>{o(F),k(F.target.value)},endAdornment:e.jsx(M,{position:"end",children:e.jsx(q,{"aria-label":"toggle password visibility",onClick:O,onMouseDown:v,edge:"end",size:"large",children:b?e.jsx(E,{}):e.jsx(A,{})})}),inputProps:{}}),i.password&&t.password&&e.jsx(d,{error:!0,id:"standard-weight-helper-text-password-register",children:t.password})]}),e.jsxs(m,{fullWidth:!0,error:!!(i.confirmPassword&&t.confirmPassword),sx:{...n.typography.customInput},children:[e.jsx(p,{htmlFor:"outlined-adornment-confirmPassword-register",children:"confirmPassword"}),e.jsx(g,{id:"outlined-adornment-confirmPassword-register",type:y?"text":"password",value:l.confirmPassword,name:"confirmPassword",label:"ConfirmPassword",onBlur:a,onChange:o,endAdornment:e.jsx(M,{position:"end",children:e.jsx(q,{"aria-label":"toggle password visibility",onClick:G,onMouseDown:v,edge:"end",size:"large",children:y?e.jsx(E,{}):e.jsx(A,{})})}),inputProps:{}}),i.confirmPassword&&t.confirmPassword&&e.jsx(d,{error:!0,id:"standard-weight-helper-text-confirmPassword-register",children:t.confirmPassword})]}),T!==0&&e.jsx(m,{fullWidth:!0,children:e.jsx(h,{sx:{mb:2},children:e.jsxs(s,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(s,{item:!0,children:e.jsx(h,{style:{backgroundColor:u==null?void 0:u.color},sx:{width:85,height:8,borderRadius:"7px"}})}),e.jsx(s,{item:!0,children:e.jsx(w,{variant:"subtitle1",fontSize:"0.75rem",children:u==null?void 0:u.label})})]})})}),t.submit&&e.jsx(h,{sx:{mt:3},children:e.jsx(d,{error:!0,children:t.submit})}),I&&e.jsx(s,{container:!0,alignItems:"center",justifyContent:"center",children:e.jsx(h,{sx:{mt:1},children:e.jsx(d,{error:!0,children:I})})}),e.jsx(h,{sx:{mt:2},children:e.jsx(Q,{children:e.jsx(Z,{disableElevation:!0,disabled:f,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Sign up"})})})]})})]})},je=()=>{const r=D(n=>n.breakpoints.down("md"));return e.jsx(ie,{children:e.jsxs(s,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(s,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:e.jsx(s,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(ae,{children:e.jsxs(s,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[e.jsx(s,{item:!0,sx:{mb:3},children:e.jsx(B,{to:"#","aria-label":"theme logo",children:e.jsx(X,{})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(s,{container:!0,direction:{xs:"column-reverse",md:"row"},alignItems:"center",justifyContent:"center",children:e.jsx(s,{item:!0,children:e.jsx(Y,{alignItems:"center",justifyContent:"center",spacing:1,children:e.jsx(w,{color:"secondary.main",gutterBottom:!0,variant:r?"h3":"h2",children:"Sign up"})})})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(xe,{})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(ee,{})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(s,{item:!0,container:!0,direction:"column",alignItems:"center",xs:12,children:e.jsx(w,{component:B,to:"/login",variant:"subtitle1",sx:{textDecoration:"none"},children:"Already have an account?"})})})]})})})})}),e.jsx(s,{item:!0,xs:12,sx:{m:3,mt:1},children:e.jsx(oe,{})})]})})};export{je as default};
